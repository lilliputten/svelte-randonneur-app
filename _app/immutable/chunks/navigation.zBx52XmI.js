import{s as H,u as _,p as M,I as q,C as v,G,r as Y,x as J,y as Q,z as U,Y as b}from"./scheduler.2K4EEG2h.js";import{S as X,i as Z,f as x,b as w,d as V,m as $,a as P,t as E,e as ee}from"./index.DNsyLV3f.js";import{f as te,B as se,g as oe,h as re,E as ne,D as I,C as A}from"./params.UDg4dTHP.js";import{w as f}from"./index.8Mb_J4nB.js";import{k as ce}from"./singletons.rWmZLari.js";const ae=te((e,{radius:t,shadow:s,withBorder:o,padding:n})=>({root:{darkMode:{backgroundColor:e.fn.themeColor("dark",7),color:e.fn.themeColor("dark")},padding:e.fn.size({size:n,sizes:e.space}),outline:0,display:"block",textDecoration:"none",color:e.colors.black.value,backgroundColor:e.colors.white.value,boxSizing:"border-box",borderRadius:`$${t}`,WebkitTapHighlightColor:"transparent",boxShadow:e.shadows[s].value||s||"none",border:void 0},withBorder:{darkMode:{border:`1px solid ${e.fn.themeColor("dark",4)}`},border:`1px solid ${e.fn.themeColor("gray",3)}`}}));function ie(e){let t;const s=e[12].default,o=Y(s,e,e[14],null);return{c(){o&&o.c()},l(n){o&&o.l(n)},m(n,a){o&&o.m(n,a),t=!0},p(n,a){o&&o.p&&(!t||a&16384)&&J(o,s,n,n[14],t?U(s,n[14],a,null):Q(n[14]),null)},i(n){t||(P(o,n),t=!0)},o(n){E(o,n),t=!1},d(n){o&&o.d(n)}}}function le(e){let t,s,o;const n=[{class:e[7](e[6].root,e[2],e[4]&&e[6].withBorder,e[5]({css:e[3]}))},{use:e[1]},e[8]];function a(r){e[13](r)}let c={$$slots:{default:[ie]},$$scope:{ctx:e}};for(let r=0;r<n.length;r+=1)c=_(c,n[r]);return e[0]!==void 0&&(c.element=e[0]),t=new se({props:c}),M.push(()=>x(t,"element",a)),{c(){w(t.$$.fragment)},l(r){V(t.$$.fragment,r)},m(r,i){$(t,r,i),o=!0},p(r,[i]){const u=i&510?oe(n,[i&252&&{class:r[7](r[6].root,r[2],r[4]&&r[6].withBorder,r[5]({css:r[3]}))},i&2&&{use:r[1]},i&256&&re(r[8])]):{};i&16384&&(u.$$scope={dirty:i,ctx:r}),!s&&i&1&&(s=!0,u.element=r[0],q(()=>s=!1)),t.$set(u)},i(r){o||(P(t.$$.fragment,r),o=!0)},o(r){E(t.$$.fragment,r),o=!1},d(r){ee(t,r)}}}function ue(e,t,s){let o,n,a;const c=["use","element","class","override","shadow","radius","withBorder","padding"];let r=v(t,c),{$$slots:i={},$$scope:u}=t,{use:d=[],element:p=void 0,class:h="",override:B={},shadow:S="xs",radius:m="sm",withBorder:g=!1,padding:y="md"}=t;function W(l){p=l,s(0,p)}return e.$$set=l=>{t=_(_({},t),G(l)),s(8,r=v(t,c)),"use"in l&&s(1,d=l.use),"element"in l&&s(0,p=l.element),"class"in l&&s(2,h=l.class),"override"in l&&s(3,B=l.override),"shadow"in l&&s(9,S=l.shadow),"radius"in l&&s(10,m=l.radius),"withBorder"in l&&s(4,g=l.withBorder),"padding"in l&&s(11,y=l.padding),"$$scope"in l&&s(14,u=l.$$scope)},e.$$.update=()=>{e.$$.dirty&3600&&s(7,{cx:o,classes:n,getStyles:a}=ae({radius:m,shadow:S,withBorder:g,padding:y},{name:"Paper"}),o,(s(6,n),s(10,m),s(9,S),s(4,g),s(11,y)),(s(5,a),s(10,m),s(9,S),s(4,g),s(11,y)))},[p,d,h,B,g,a,n,o,r,S,m,y,i,W,u]}class fe extends X{constructor(t){super(),Z(this,t,ue,le,H,{use:1,element:0,class:2,override:3,shadow:9,radius:10,withBorder:4,padding:11})}}const Pe=fe,j=f(void 0),F=["create-datasets","delete","disaggregate","mapping","replace","update"],O=["string","number","boolean","select","date"];function de(e){return Array.isArray(e)?e:[e]}function Ee(e){return e?e instanceof Error?e.message:String(e):""}const pe=["unit","categories","role"];function R(e){return O.includes(e)}function Oe(e){const t=e.type;return R(t)}function be(e,t=""){let s={};const o=Object.keys(e);for(const n of o){const a=[t,n].filter(Boolean).join("."),c=e[n];if(c&&typeof c=="object")if(Array.isArray(c))s[a]=[...c];else{const r=be(c,a);s={...s,...r}}else s[a]=c}return s}function Re(e){const t={},s=Object.keys(e);for(const o of s){const n=e[o];if(o.includes(".")){const a=o.split(".");let c=t;for(let r=0;r<a.length;r++){const i=a[r];if(r===a.length-1){c[i]=n;continue}if((!c[i]||typeof c[i]!="object")&&(c[i]={}),c=c[i],typeof c!="object"){const d=new Error('Nested chain for id "'+i+'" (from the flat id: "'+o+'") should be an object, but it is "'+typeof c+'".');console.error("[EditableTableHelpers:restoreFullFromFlatData]",d.message,{error:d,flatData:e,flatId:o,val:n,keys:s,id:i});debugger}}}else t[o]=n}return t}function Te(e){const{id:t,_flatId:s}=e;return s||t}function T(e,t,s,o=0){const n=[];return t==null||typeof t!="object"?n:Object.keys(t).map(r=>{const i=t[r];return K(r,i,s,o+1)})}function C(e,t){if(e==null||t==null)return e;if(typeof e=="object")return typeof t!="object"?e:Array.isArray(e)&&Array.isArray(t)?e.concat(t):{...e,...t};if(O.includes(typeof e)){if(typeof t!="string")return e}else return}function Se(e,t,s,o=0){const n={};let a;t.forEach(r=>{r&&(typeof r!="object"?a=C(r,a):Object.keys(r).forEach(u=>{const d=n[u],p=r[u],h=C(p,d);n[u]=h}))});let c;if(n&&Object.keys(n).length){const r=T(e,n,s,o);c={id:e+"-item",type:"object",spec:r}}else c=z(e,a);return c}function z(e,t){const s=typeof t,o=R(s)?s:"string";return{id:e,type:o}}function K(e,t,s,o=0){if(t!=null&&Array.isArray(t)){const a=Se(e,t,s,o+1);return{id:e,type:"list",spec:a}}else if(typeof t=="object"){const a=T(e,t,s,o+1);return{id:e,type:"object",spec:a}}return z(e,t)}function L(e){return pe.includes(e)?"select":!0}function N(e,t={},s="",o=0){let n={};return e.forEach(a=>{const{id:c,type:r}=a,i=[s,c].filter(Boolean).join(".");if(r==="object"){const u=N(de(a.spec),t,i,o+1);u&&(n={...n,...u})}else n[i]=L(c)}),n}function k(e,t={},s="",o=0){const{id:n,type:a}=e;if(a==="object"){const c=e.spec;Array.isArray(c)?c.forEach(r=>{k(r,t,s,o+1)}):k(c,t,s,o+1)}else if(a==="list"&&(e=e,!e.filters)){let c={};const r=e.spec;if(r.type==="object"){let i=r.spec;Array.isArray(i)||(i=[i]),c=N(i,t,s,o+1)}else c[n]=L(n);Object.keys(c).length&&(e.filters=c)}}const me=f(void 0),ge=f(void 0),ye=f(void 0),he=f(void 0),je=f(void 0),_e=f(void 0),ke={"create-datasets":me,delete:ge,disaggregate:ye,mapping:he,replace:je,update:_e};function De(e,t){const s=ke[e];if(!t){s.set(void 0);return}const o=K(e,t);k(o),s.set(o)}function ze(){const e=b(j);F.forEach(n=>{const a=A[n],c=e?.[n];a.set(c),De(n,c)});const s=["properties",...Ae()];ne.set(s);const o=b(I);o!==s[0]&&(!o||!s.includes(o))&&I.set(s[0])}function Ke(){const e=F.reduce((t,s)=>{const o=A[s],n=b(o);return t[s]=n,t},{});j.update(t=>({...t,...e}))}function Ae(){return F.map(e=>{const t=A[e];return b(t)&&e}).filter(Boolean)}const D=f(void 0);function Le(){const e=b(j);if(!e){D.set(void 0);return}const{name:t,version:s,description:o,homepage:n,licenses:a,contributors:c,created:r}=e,i={name:t,version:s,description:o,homepage:n,licenses:a,contributors:c,created:r};D.set(i)}function Ne(){const e=b(D),t=e?.name,s=e?.version,o=e?.description,n=e?.homepage,a=e?.licenses,c=e?.contributors,r=e?.created;j.update(i=>({...i,name:t,version:s,description:o,homepage:n,licenses:a,contributors:c,created:r}))}const We=ce("goto");export{Pe as P,Le as a,We as b,de as c,Re as d,ze as e,Te as f,Ee as g,D as h,Oe as i,k as j,ke as k,Ne as l,be as m,j as r,Ke as s,pe as u};
