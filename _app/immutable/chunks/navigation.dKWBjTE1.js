import{X as S}from"./scheduler.jafUb2iH.js";import{s as x,i as A,a as O,e as P}from"./extendDataSetWithFilters.QmCBICxq.js";import{x as E,w as y,s as d}from"./params.e5ZZ4J8A.js";import{w as i}from"./index.iWIm743a.js";import"./index.VIoRrsQt.js";import{k as T}from"./singletons.Jp5-snPl.js";const f=i(void 0),m=["create-datasets","delete","disaggregate","mapping","replace","update"];function M(e){return e?e instanceof Error?e.message:String(e):""}function g(e,t,s,o=0){const r=[];return t==null||typeof t!="object"?r:Object.keys(t).map(c=>{const p=t[c];return j(c,p,s,o+1)})}function b(e,t){return e==null||t==null?e||t:typeof e=="object"?typeof t!="object"?e:Array.isArray(e)&&Array.isArray(t)?e.concat(t):{...e,...t}:x.includes(typeof e)?typeof t!="string"?e:t:void 0}function k(e,t,s,o=0){const r={};let n;t.forEach(c=>{c&&(typeof c!="object"?n=b(c,n):Object.keys(c).forEach(u=>{const D=r[u],h=c[u],R=b(h,D);r[u]=R}))});let a;if(r&&Object.keys(r).length){const c=g(e,r,s,o);a={id:e+"-item",type:"object",spec:c}}else a=v(e,n);return a}function v(e,t){const s=typeof t;let o=A(s)?s:"string";return o==="string"&&O(t)&&(o="date"),{id:e,type:o}}function j(e,t,s,o=0){if(t!=null&&Array.isArray(t)){const n=k(e,t,s,o+1);return{id:e,type:"list",spec:n}}else if(typeof t=="object"){const n=g(e,t,s,o+1);return{id:e,type:"object",spec:n}}return v(e,t)}const I=i(void 0),K=i(void 0),_=i(void 0),W=i(void 0),B=i(void 0),F=i(void 0),L={"create-datasets":I,delete:K,disaggregate:_,mapping:W,replace:B,update:F};function N(e,t){const s=L[e];if(!t){s.set(void 0);return}const o=j(e,t);P(o),s.set(o)}function Q(){const e=S(f);m.forEach(r=>{const n=d[r],a=e?.[r];n.set(a),N(r,a)});const s=["properties",...X()];E.set(s);const o=S(y);o!==s[0]&&(!o||!s.includes(o))&&y.set(s[0])}function U(){const e=m.reduce((t,s)=>{const o=d[s],r=S(o);return t[s]=r,t},{});f.update(t=>({...t,...e}))}function X(){return m.map(e=>{const t=d[e];return S(t)&&e}).filter(Boolean)}const l=i(void 0);function Y(){const e=S(f);if(!e){l.set(void 0);return}const{name:t,version:s,description:o,homepage:r,licenses:n,contributors:a,created:c}=e,p={name:t,version:s,description:o,homepage:r,licenses:n,contributors:a,created:c};l.set(p)}function Z(){const e=S(l),t=e?.name,s=e?.version,o=e?.description,r=e?.homepage,n=e?.licenses,a=e?.contributors,c=e?.created;f.update(p=>({...p,name:t,version:s,description:o,homepage:r,licenses:n,contributors:a,created:c}))}const $=T("goto");export{Y as a,$ as b,l as c,L as d,Q as e,Z as f,M as g,f as r,U as s};
