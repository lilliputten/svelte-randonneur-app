import{s as P,u as ue,P as ve,Q as Se,h as y,d as m,j as b,T as be,i as C,K as k,O as j,C as we,G as Ue,A as le,l as Oe,m as Be,f as $,g as E,U as We,a as K,e as ne,c as J,D as te,p as Te,I as Pe,X as De,n as Ge,W as pe,Y as Ke,V as Je,L as Ye,o as Ze}from"../chunks/scheduler.8lYd5bl9.js";import{S as L,i as q,b as A,d as F,m as N,a as S,t as w,e as M,g as Y,c as Z,f as He}from"../chunks/index.QJWWgKti.js";import{w as Le}from"../chunks/index.xdyzVbPO.js";import{c as Ie,d as Qe,f as Xe,r as xe,s as et,h as tt,g as nt,i as at,b as st}from"../chunks/navigation.k4DELVeN.js";import{a as rt,b as he,h as $e}from"../chunks/randoFileInfoStore.3THqlZgm.js";import{g as it,l as re,m as Ee,p as ot}from"../chunks/FilterActionIcon.module.ENRE_V7v.js";import{e as lt,B as ce,a as ct}from"../chunks/extendDataSetWithFilters.73Ta82tq.js";import{u as ye,G as ft,E as dt,e as ut,P as ht,C as _t}from"../chunks/EditableList.UpnABtIo.js";function pt(a){let e,n,t=[{width:a[1]},{height:a[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},a[2]],r={};for(let i=0;i<t.length;i+=1)r=ue(r,t[i]);return{c(){e=ve("svg"),n=ve("path"),this.h()},l(i){e=Se(i,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var s=y(e);n=Se(s,"path",{"fill-rule":!0,"clip-rule":!0,d:!0,fill:!0}),y(n).forEach(m),s.forEach(m),this.h()},h(){b(n,"fill-rule","evenodd"),b(n,"clip-rule","evenodd"),b(n,"d","M7.50005 1.04999C7.74858 1.04999 7.95005 1.25146 7.95005 1.49999V8.41359L10.1819 6.18179C10.3576 6.00605 10.6425 6.00605 10.8182 6.18179C10.994 6.35753 10.994 6.64245 10.8182 6.81819L7.81825 9.81819C7.64251 9.99392 7.35759 9.99392 7.18185 9.81819L4.18185 6.81819C4.00611 6.64245 4.00611 6.35753 4.18185 6.18179C4.35759 6.00605 4.64251 6.00605 4.81825 6.18179L7.05005 8.41359V1.49999C7.05005 1.25146 7.25152 1.04999 7.50005 1.04999ZM2.5 10C2.77614 10 3 10.2239 3 10.5V12C3 12.5539 3.44565 13 3.99635 13H11.0012C11.5529 13 12 12.5528 12 12V10.5C12 10.2239 12.2239 10 12.5 10C12.7761 10 13 10.2239 13 10.5V12C13 13.1041 12.1062 14 11.0012 14H3.99635C2.89019 14 2 13.103 2 12V10.5C2 10.2239 2.22386 10 2.5 10Z"),b(n,"fill",a[0]),be(e,r)},m(i,s){C(i,e,s),k(e,n)},p(i,[s]){s&1&&b(n,"fill",i[0]),be(e,r=it(t,[s&2&&{width:i[1]},s&2&&{height:i[1]},{viewBox:"0 0 15 15"},{fill:"none"},{xmlns:"http://www.w3.org/2000/svg"},s&4&&i[2]]))},i:j,o:j,d(i){i&&m(e)}}}function gt(a,e,n){const t=["color","size"];let r=we(e,t),{color:i="currentColor"}=e,{size:s=15}=e;return a.$$set=l=>{e=ue(ue({},e),Ue(l)),n(2,r=we(e,t)),"color"in l&&n(0,i=l.color),"size"in l&&n(1,s=l.size)},[i,s,r]}class mt extends L{constructor(e){super(),q(this,e,gt,pt,P,{color:0,size:1})}}const vt=mt;function _e(a,e=0,n="",t={}){const{id:r,type:i}=a,s=[n,r].filter(Boolean).join(".");if(e&&!a.label&&!t.dontAddLabels&&(a.label=a.title||ye(r)),!a.title&&!t.dontAddTitles&&(a.title=a.label||ye(r)),a._fullId=s,a._level=e,i==="object"&&a.spec&&lt(a.spec).forEach(o=>{_e(o,e+1,s)}),i==="list"&&a.spec){const l=a.spec;a.layout="table",a.flatObjects=!0,a.editInPlace=!1,a.useActionsColumn=!0,a.activeRows=!0,_e(l,e+1,s,{dontAddLabels:!0})}}const St={id:"properties",type:"object",spec:[{id:"name",type:"string"},{id:"licenses",type:"list",spec:{id:"licenses-item",type:"object",spec:[{id:"name",type:"string"},{id:"path",type:"string"},{id:"title",type:"string"}]}},{id:"version",type:"string"},{id:"description",type:"string"},{id:"homepage",type:"string"},{id:"created",type:"string"},{id:"contributors",type:"list",spec:{id:"contributors-item",type:"object",spec:[{id:"title",type:"string"},{id:"path",type:"string"},{id:"role",type:"string"}]}}]},qe={properties:"Properties","create-datasets":"Create datasets",delete:"Delete",disaggregate:"Disaggregate",mapping:"Mapping",replace:"Replace",update:"Update"},bt="_Section_1wy0n_11",Re={Section:bt};function wt(a){let e;return{c(){e=Oe(a[4])},l(n){e=Be(n,a[4])},m(n,t){C(n,e,t)},p:j,d(n){n&&m(e)}}}function Dt(a){let e,n;return e=new ce({props:{class:re(a[0],Re.Section),id:a[2],title:a[4],variant:a[1]?"filled":"light",fullSize:!0,$$slots:{default:[wt]},$$scope:{ctx:a}}}),e.$on("click",function(){le(a[3].bind(null,a[2]))&&a[3].bind(null,a[2]).apply(this,arguments)}),{c(){A(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){a=t;const i={};r&1&&(i.class=re(a[0],Re.Section)),r&4&&(i.id=a[2]),r&2&&(i.variant=a[1]?"filled":"light"),r&32&&(i.$$scope={dirty:r,ctx:a}),e.$set(i)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function It(a,e,n){let{className:t=""}=e,{isActive:r=!1}=e,{sectionId:i}=e,{onChangeSection:s}=e;const l=qe[i];return a.$$set=o=>{"className"in o&&n(0,t=o.className),"isActive"in o&&n(1,r=o.isActive),"sectionId"in o&&n(2,i=o.sectionId),"onChangeSection"in o&&n(3,s=o.onChangeSection)},[t,r,i,s,l]}class $t extends L{constructor(e){super(),q(this,e,It,Dt,P,{className:0,isActive:1,sectionId:2,onChangeSection:3})}}function ke(a,e,n){const t=a.slice();return t[3]=e[n],t}function Ce(a){let e;return{c(){e=$("div"),this.h()},l(n){e=E(n,"DIV",{class:!0}),y(e).forEach(m),this.h()},h(){b(e,"class","delimiter section svelte-1jijdnl")},m(n,t){C(n,e,t)},d(n){n&&m(e)}}}function Ae(a){let e,n,t,r;e=new $t({props:{sectionId:a[3],isActive:a[3]===a[1],onChangeSection:a[2]}});let i=a[3]==="properties"&&Ce();return{c(){A(e.$$.fragment),n=K(),i&&i.c(),t=ne()},l(s){F(e.$$.fragment,s),n=J(s),i&&i.l(s),t=ne()},m(s,l){N(e,s,l),C(s,n,l),i&&i.m(s,l),C(s,t,l),r=!0},p(s,l){const o={};l&1&&(o.sectionId=s[3]),l&3&&(o.isActive=s[3]===s[1]),l&4&&(o.onChangeSection=s[2]),e.$set(o),s[3]==="properties"?i||(i=Ce(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},i(s){r||(S(e.$$.fragment,s),r=!0)},o(s){w(e.$$.fragment,s),r=!1},d(s){s&&(m(n),m(t)),M(e,s),i&&i.d(s)}}}function Et(a){let e,n,t,r,i=Ee(a[0]),s=[];for(let o=0;o<i.length;o+=1)s[o]=Ae(ke(a,i,o));const l=o=>w(s[o],1,1,()=>{s[o]=null});return{c(){e=$("div"),n=$("div"),t=$("div");for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){e=E(o,"DIV",{class:!0});var d=y(e);n=E(d,"DIV",{class:!0});var f=y(n);t=E(f,"DIV",{class:!0});var p=y(t);for(let c=0;c<s.length;c+=1)s[c].l(p);p.forEach(m),f.forEach(m),d.forEach(m),this.h()},h(){b(t,"class","content svelte-1jijdnl"),b(n,"class","container scrollable svelte-1jijdnl"),b(e,"class","SectionsNavigator svelte-1jijdnl")},m(o,d){C(o,e,d),k(e,n),k(n,t);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null);r=!0},p(o,[d]){if(d&7){i=Ee(o[0]);let f;for(f=0;f<i.length;f+=1){const p=ke(o,i,f);s[f]?(s[f].p(p,d),S(s[f],1)):(s[f]=Ae(p),s[f].c(),S(s[f],1),s[f].m(t,null))}for(Y(),f=i.length;f<s.length;f+=1)l(f);Z()}},i(o){if(!r){for(let d=0;d<i.length;d+=1)S(s[d]);r=!0}},o(o){s=s.filter(Boolean);for(let d=0;d<s.length;d+=1)w(s[d]);r=!1},d(o){o&&m(e),We(s,o)}}}function yt(a,e,n){let{allSections:t}=e,{sectionId:r}=e,{onChangeSection:i}=e;return a.$$set=s=>{"allSections"in s&&n(0,t=s.allSections),"sectionId"in s&&n(1,r=s.sectionId),"onChangeSection"in s&&n(2,i=s.onChangeSection)},[t,r,i]}class Rt extends L{constructor(e){super(),q(this,e,yt,Et,P,{allSections:0,sectionId:1,onChangeSection:2})}}var ze={exports:{}};(function(a){/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var e=e||function(n){if(!(!n||typeof navigator<"u"&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=n.document,r=function(){return n.URL||n.webkitURL||n},i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,l=function(_){var v=new MouseEvent("click");_.dispatchEvent(v)},o=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),d=n.webkitRequestFileSystem,f=n.requestFileSystem||d||n.mozRequestFileSystem,p=function(_){(n.setImmediate||n.setTimeout)(function(){throw _},0)},c="application/octet-stream",u=0,h=1e3*40,g=function(_){var v=function(){typeof _=="string"?r().revokeObjectURL(_):_.remove()};setTimeout(v,h)},I=function(_,v,O){v=[].concat(v);for(var D=v.length;D--;){var Q=_["on"+v[D]];if(typeof Q=="function")try{Q.call(_,O||_)}catch(ie){p(ie)}}},V=function(_){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_},T=function(_,v,O){O||(_=V(_));var D=this,Q=_.type,ie=!1,H,X,de=function(){I(D,"writestart progress write writeend".split(" "))},U=function(){if(X&&o&&typeof FileReader<"u"){var W=new FileReader;W.onloadend=function(){var ae=W.result;X.location.href="data:attachment/file"+ae.slice(ae.search(/[,;]/)),D.readyState=D.DONE,de()},W.readAsDataURL(_),D.readyState=D.INIT;return}if((ie||!H)&&(H=r().createObjectURL(_)),X)X.location.href=H;else{var oe=n.open(H,"_blank");oe===void 0&&o&&(n.location.href=H)}D.readyState=D.DONE,de(),g(H)},x=function(W){return function(){if(D.readyState!==D.DONE)return W.apply(this,arguments)}},ge={create:!0,exclusive:!1},me;if(D.readyState=D.INIT,v||(v="download"),s){H=r().createObjectURL(_),setTimeout(function(){i.href=H,i.download=v,l(i),de(),g(H),D.readyState=D.DONE});return}if(n.chrome&&Q&&Q!==c&&(me=_.slice||_.webkitSlice,_=me.call(_,0,_.size,c),ie=!0),d&&v!=="download"&&(v+=".download"),(Q===c||d)&&(X=n),!f){U();return}u+=_.size,f(n.TEMPORARY,u,x(function(W){W.root.getDirectory("saved",ge,x(function(oe){var ae=function(){oe.getFile(v,ge,x(function(z){z.createWriter(x(function(ee){ee.onwriteend=function(G){X.location.href=z.toURL(),D.readyState=D.DONE,I(D,"writeend",G),g(z)},ee.onerror=function(){var G=ee.error;G.code!==G.ABORT_ERR&&U()},"writestart progress write abort".split(" ").forEach(function(G){ee["on"+G]=D["on"+G]}),ee.write(_),D.abort=function(){ee.abort(),D.readyState=D.DONE},D.readyState=D.WRITING}),U)}),U)};oe.getFile(v,{create:!1},x(function(z){z.remove(),ae()}),x(function(z){z.code===z.NOT_FOUND_ERR?ae():U()}))}),U)}),U)},R=T.prototype,fe=function(_,v,O){return new T(_,v,O)};return typeof navigator<"u"&&navigator.msSaveOrOpenBlob?function(_,v,O){return O||(_=V(_)),navigator.msSaveOrOpenBlob(_,v||"download")}:(R.abort=function(){var _=this;_.readyState=_.DONE,I(_,"abort")},R.readyState=R.INIT=0,R.WRITING=1,R.DONE=2,R.error=R.onwritestart=R.onprogress=R.onwrite=R.onabort=R.onerror=R.onwriteend=null,fe)}}(typeof self<"u"&&self||typeof window<"u"&&window||ot.content);a.exports&&(a.exports.saveAs=e)})(ze);var kt=ze.exports;function Ct(a){let e,n,t;return n=new ft({props:{spec:a[1],data:a[0],onChange:a[2]}}),{c(){e=$("div"),A(n.$$.fragment),this.h()},l(r){e=E(r,"DIV",{class:!0});var i=y(e);F(n.$$.fragment,i),i.forEach(m),this.h()},h(){b(e,"class","EditProperties svelte-qhxnxq")},m(r,i){C(r,e,i),N(n,e,null),t=!0},p(r,[i]){const s={};i&1&&(s.data=r[0]),n.$set(s)},i(r){t||(S(n.$$.fragment,r),t=!0)},o(r){w(n.$$.fragment,r),t=!1},d(r){r&&m(e),M(n)}}}function At(a,e,n){let t;te(a,Ie,s=>n(0,t=s));const r={...St};_e(r),ct(r);function i(s,l){Ie.set(s)}return[t,r,i]}class Ft extends L{constructor(e){super(),q(this,e,At,Ct,P,{})}}function Fe(a){let e=a[0],n,t,r=Ne(a);return{c(){r.c(),n=ne()},l(i){r.l(i),n=ne()},m(i,s){r.m(i,s),C(i,n,s),t=!0},p(i,s){s&1&&P(e,e=i[0])?(Y(),w(r,1,1,j),Z(),r=Ne(i),r.c(),S(r,1),r.m(n.parentNode,n)):r.p(i,s)},i(i){t||(S(r),t=!0)},o(i){w(r),t=!1},d(i){i&&m(n),r.d(i)}}}function Ne(a){let e,n,t;function r(s){a[11](s)}let i={spec:a[6],data:a[5],onChange:a[8],setHasFilters:a[1]};return a[3]!==void 0&&(i.api=a[3]),e=new dt({props:i}),Te.push(()=>He(e,"api",r)),{c(){A(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){N(e,s,l),t=!0},p(s,l){const o={};l&64&&(o.spec=s[6]),l&32&&(o.data=s[5]),l&2&&(o.setHasFilters=s[1]),!n&&l&8&&(n=!0,o.api=s[3],Pe(()=>n=!1)),e.$set(o)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function Nt(a){let e,n,t=a[2]&&Fe(a);return{c(){e=$("div"),t&&t.c(),this.h()},l(r){e=E(r,"DIV",{class:!0,"data-set-id":!0});var i=y(e);t&&t.l(i),i.forEach(m),this.h()},h(){b(e,"class","EditDataSet svelte-ki2c8t"),b(e,"data-set-id",a[0])},m(r,i){C(r,e,i),t&&t.m(e,null),n=!0},p(r,[i]){r[2]?t?(t.p(r,i),i&4&&S(t,1)):(t=Fe(r),t.c(),S(t,1),t.m(e,null)):t&&(Y(),w(t,1,1,()=>{t=null}),Z()),(!n||i&1)&&b(e,"data-set-id",r[0])},i(r){n||(S(t),n=!0)},o(r){w(t),n=!1},d(r){r&&m(e),t&&t.d()}}}function Mt(a,e,n){let t,r,i,s,l,o=j,d=()=>(o(),o=De(r,v=>n(10,l=v)),r),f,p=j,c=()=>(p(),p=De(t,v=>n(2,f=v)),t);a.$$.on_destroy.push(()=>o()),a.$$.on_destroy.push(()=>p());let{dataSetId:u}=e,{setHasFilters:h=void 0}=e;function g(v){const O={...v};return ut(O),O}let I;function V(v,O){r.set(v)}function T(){I.resetFilters()}function R(){I.addDataRow()}const fe={resetFilters:T,addDataRow:R};function _(v){I=v,n(3,I)}return a.$$set=v=>{"dataSetId"in v&&n(0,u=v.dataSetId),"setHasFilters"in v&&n(1,h=v.setHasFilters)},a.$$.update=()=>{a.$$.dirty&1&&c(n(7,t=Qe[u])),a.$$.dirty&1&&d(n(4,r=Xe[u])),a.$$.dirty&4&&n(6,i=g(f)),a.$$.dirty&1024&&n(5,s=l)},[u,h,f,I,r,s,i,t,V,fe,l,_]}class Vt extends L{constructor(e){super(),q(this,e,Mt,Nt,P,{dataSetId:0,setHasFilters:1,api:9})}get api(){return this.$$.ctx[9]}}const jt="_MiddleButton_12513_11",Ot="_RightButton_12513_12",Bt="_Title_12513_13",Tt="_MiddleMenu_12513_14",Pt="_RightMenu_12513_15",Ht="_EditorHeader_12513_16",Lt="_text_12513_45",B={MiddleButton:jt,RightButton:Ot,Title:Bt,MiddleMenu:Tt,RightMenu:Pt,EditorHeader:Ht,text:Lt};function Me(a){let e,n;return e=new ce({props:{class:B.MiddleButton,color:"green",variant:"subtle",title:"Add dataset row",$$slots:{leftIcon:[zt],default:[qt]},$$scope:{ctx:a}}}),e.$on("click",function(){le(a[5])&&a[5].apply(this,arguments)}),{c(){A(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){a=t;const i={};r&512&&(i.$$scope={dirty:r,ctx:a}),e.$set(i)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function qt(a){let e,n="Add dataset row";return{c(){e=$("span"),e.textContent=n,this.h()},l(t){e=E(t,"SPAN",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1sinwsh"&&(e.textContent=n),this.h()},h(){b(e,"class",B.text)},m(t,r){C(t,e,r)},p:j,d(t){t&&m(e)}}}function zt(a){let e,n;return e=new ht({props:{slot:"leftIcon"}}),{c(){A(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:j,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ve(a){let e,n;return e=new ce({props:{class:B.MiddleButton,color:"red",variant:"subtle",title:"Reset all filters",$$slots:{leftIcon:[Wt],default:[Ut]},$$scope:{ctx:a}}}),e.$on("click",function(){le(a[4])&&a[4].apply(this,arguments)}),{c(){A(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){a=t;const i={};r&512&&(i.$$scope={dirty:r,ctx:a}),e.$set(i)},i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Ut(a){let e,n="Reset all filters";return{c(){e=$("span"),e.textContent=n,this.h()},l(t){e=E(t,"SPAN",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-e7zu31"&&(e.textContent=n),this.h()},h(){b(e,"class",B.text)},m(t,r){C(t,e,r)},p:j,d(t){t&&m(e)}}}function Wt(a){let e,n;return e=new _t({props:{slot:"leftIcon"}}),{c(){A(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:j,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Gt(a){let e,n="Export data";return{c(){e=$("span"),e.textContent=n,this.h()},l(t){e=E(t,"SPAN",{class:!0,"data-svelte-h":!0}),pe(e)!=="svelte-1wi0f3i"&&(e.textContent=n),this.h()},h(){b(e,"class",B.text)},m(t,r){C(t,e,r)},p:j,d(t){t&&m(e)}}}function Kt(a){let e,n;return e=new vt({props:{slot:"leftIcon"}}),{c(){A(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:j,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function Jt(a){let e,n,t,r,i,s,l,o,d,f,p,c=a[7]&&Me(a),u=a[7]&&a[2]&&Ve(a);return d=new ce({props:{class:B.RightButton,variant:"subtle",title:"Export data",$$slots:{leftIcon:[Kt],default:[Gt]},$$scope:{ctx:a}}}),d.$on("click",function(){le(a[3])&&a[3].apply(this,arguments)}),{c(){e=$("div"),n=$("div"),t=Oe(a[6]),r=K(),i=$("div"),c&&c.c(),s=K(),u&&u.c(),l=K(),o=$("div"),A(d.$$.fragment),this.h()},l(h){e=E(h,"DIV",{class:!0,"data-section-id":!0});var g=y(e);n=E(g,"DIV",{class:!0});var I=y(n);t=Be(I,a[6]),I.forEach(m),r=J(g),i=E(g,"DIV",{class:!0});var V=y(i);c&&c.l(V),s=J(V),u&&u.l(V),V.forEach(m),l=J(g),o=E(g,"DIV",{class:!0});var T=y(o);F(d.$$.fragment,T),T.forEach(m),g.forEach(m),this.h()},h(){b(n,"class",B.Title),b(i,"class",B.MiddleMenu),b(o,"class",B.RightMenu),b(e,"class",f=re(a[1],B.EditorHeader)),b(e,"data-section-id",a[0])},m(h,g){C(h,e,g),k(e,n),k(n,t),k(e,r),k(e,i),c&&c.m(i,null),k(i,s),u&&u.m(i,null),k(e,l),k(e,o),N(d,o,null),p=!0},p(h,[g]){a=h,(!p||g&64)&&Ge(t,a[6]),a[7]?c?(c.p(a,g),g&128&&S(c,1)):(c=Me(a),c.c(),S(c,1),c.m(i,s)):c&&(Y(),w(c,1,1,()=>{c=null}),Z()),a[7]&&a[2]?u?(u.p(a,g),g&132&&S(u,1)):(u=Ve(a),u.c(),S(u,1),u.m(i,null)):u&&(Y(),w(u,1,1,()=>{u=null}),Z());const I={};g&512&&(I.$$scope={dirty:g,ctx:a}),d.$set(I),(!p||g&2&&f!==(f=re(a[1],B.EditorHeader)))&&b(e,"class",f),(!p||g&1)&&b(e,"data-section-id",a[0])},i(h){p||(S(c),S(u),S(d.$$.fragment,h),p=!0)},o(h){w(c),w(u),w(d.$$.fragment,h),p=!1},d(h){h&&m(e),c&&c.d(),u&&u.d(),M(d)}}}function Yt(a,e,n){let t,r,i,{sectionId:s}=e,{className:l=""}=e,{hasFilters:o=!1}=e,{handleExportData:d}=e,{handleResetAllFilters:f=void 0}=e,{handleAddNewDataSetRow:p=void 0}=e;return a.$$set=c=>{"sectionId"in c&&n(0,s=c.sectionId),"className"in c&&n(1,l=c.className),"hasFilters"in c&&n(2,o=c.hasFilters),"handleExportData"in c&&n(3,d=c.handleExportData),"handleResetAllFilters"in c&&n(4,f=c.handleResetAllFilters),"handleAddNewDataSetRow"in c&&n(5,p=c.handleAddNewDataSetRow)},a.$$.update=()=>{a.$$.dirty&1&&n(8,t=s==="properties"),a.$$.dirty&256&&n(7,r=!t),a.$$.dirty&1&&n(6,i=qe[s])},[s,l,o,d,f,p,i,r,t]}class Zt extends L{constructor(e){super(),q(this,e,Yt,Jt,P,{sectionId:0,className:1,hasFilters:2,handleExportData:3,handleResetAllFilters:4,handleAddNewDataSetRow:5})}}const Qt="_DataEditorWrapper_ibwgs_11",Xt="_header_ibwgs_18",xt="_container_ibwgs_23",en="_scrollable_ibwgs_27",tn="_content_ibwgs_30",se={DataEditorWrapper:Qt,header:Xt,container:xt,scrollable:en,content:tn};function nn(a){let e,n,t;function r(s){a[8](s)}let i={dataSetId:a[0],setHasFilters:a[5]};return a[1]!==void 0&&(i.api=a[1]),e=new Vt({props:i}),Te.push(()=>He(e,"api",r)),{c(){A(e.$$.fragment)},l(s){F(e.$$.fragment,s)},m(s,l){N(e,s,l),t=!0},p(s,l){const o={};l&1&&(o.dataSetId=s[0]),!n&&l&2&&(n=!0,o.api=s[1],Pe(()=>n=!1)),e.$set(o)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function an(a){let e,n;return e=new Ft({}),{c(){A(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:j,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function sn(a){let e,n,t,r,i,s,l,o;n=new Zt({props:{className:se.header,sectionId:a[0],hasFilters:a[2],handleExportData:a[3],handleResetAllFilters:a[7],handleAddNewDataSetRow:a[6]}});const d=[an,nn],f=[];function p(c,u){return c[0]==="properties"?0:1}return s=p(a),l=f[s]=d[s](a),{c(){e=$("div"),A(n.$$.fragment),t=K(),r=$("div"),i=$("div"),l.c(),this.h()},l(c){e=E(c,"DIV",{class:!0});var u=y(e);F(n.$$.fragment,u),t=J(u),r=E(u,"DIV",{class:!0});var h=y(r);i=E(h,"DIV",{class:!0});var g=y(i);l.l(g),g.forEach(m),h.forEach(m),u.forEach(m),this.h()},h(){b(i,"class",se.content),b(r,"class",re(se.container,se.scrollable)),b(e,"class",se.DataEditorWrapper)},m(c,u){C(c,e,u),N(n,e,null),k(e,t),k(e,r),k(r,i),f[s].m(i,null),o=!0},p(c,[u]){const h={};u&1&&(h.sectionId=c[0]),u&4&&(h.hasFilters=c[2]),n.$set(h);let g=s;s=p(c),s===g?f[s].p(c,u):(Y(),w(f[g],1,1,()=>{f[g]=null}),Z(),l=f[s],l?l.p(c,u):(l=f[s]=d[s](c),l.c()),S(l,1),l.m(i,null))},i(c){o||(S(n.$$.fragment,c),S(l),o=!0)},o(c){w(n.$$.fragment,c),w(l),o=!1},d(c){c&&m(e),M(n),f[s].d()}}}function rn(a,e,n){let t,r,i;te(a,rt,h=>n(9,r=h)),te(a,xe,h=>n(10,i=h));let{sectionId:s}=e;function l(){et(),tt();const h=i,g=JSON.stringify(h,null,2),I=new Blob([g],{type:"application/json"});let V=r?.name||"exported-data.json";V=V.replace(/(\.json$|$)/i,"-exported.json");try{kt.saveAs(I,V)}catch(T){const R=nt(T);console.error("[DataEditorWrapper:handleExportData]",R,{error:T,data:h,dataJson:g,dataBlob:I,filename:V});debugger;he({message:"Cannot export data: "+R,type:"error"})}finally{he({message:"Data file has successfully exported",type:"success"})}}let o;const d=Le(!1);te(a,d,h=>n(2,t=h));function f(h){Ke(d,t=h,t)}function p(){o.addDataRow()}function c(){o.resetFilters()}function u(h){o=h,n(1,o)}return a.$$set=h=>{"sectionId"in h&&n(0,s=h.sectionId)},[s,o,t,l,d,f,p,c,u]}class on extends L{constructor(e){super(),q(this,e,rn,sn,P,{sectionId:0})}}function je(a){let e,n,t,r,i,s,l,o;return r=new Rt({props:{allSections:a[2],sectionId:a[1],onChangeSection:a[4]}}),l=new on({props:{sectionId:a[1]}}),{c(){e=$("div"),n=$("div"),t=$("div"),A(r.$$.fragment),i=K(),s=$("div"),A(l.$$.fragment),this.h()},l(d){e=E(d,"DIV",{class:!0});var f=y(e);n=E(f,"DIV",{class:!0});var p=y(n);t=E(p,"DIV",{class:!0});var c=y(t);F(r.$$.fragment,c),c.forEach(m),i=J(p),s=E(p,"DIV",{class:!0});var u=y(s);F(l.$$.fragment,u),u.forEach(m),p.forEach(m),f.forEach(m),this.h()},h(){b(t,"class","column sideColumn leftColumn svelte-1fqm414"),b(s,"class","column mainColumn svelte-1fqm414"),b(n,"class","layout svelte-1fqm414"),b(e,"class","RandoPage svelte-1fqm414")},m(d,f){C(d,e,f),k(e,n),k(n,t),N(r,t,null),k(n,i),k(n,s),N(l,s,null),o=!0},p(d,f){const p={};f&2&&(p.sectionId=d[1]),r.$set(p);const c={};f&2&&(c.sectionId=d[1]),l.$set(c)},i(d){o||(S(r.$$.fragment,d),S(l.$$.fragment,d),o=!0)},o(d){w(r.$$.fragment,d),w(l.$$.fragment,d),o=!1},d(d){d&&m(e),M(r),M(l)}}}function ln(a){let e,n,t,r=a[0]&&je(a);return{c(){e=K(),r&&r.c(),n=ne(),this.h()},l(i){Je("svelte-oi6135",document.head).forEach(m),e=J(i),r&&r.l(i),n=ne(),this.h()},h(){document.title="Edit data"},m(i,s){C(i,e,s),r&&r.m(i,s),C(i,n,s),t=!0},p(i,[s]){i[0]?r?(r.p(i,s),s&1&&S(r,1)):(r=je(i),r.c(),S(r,1),r.m(n.parentNode,n)):r&&(Y(),w(r,1,1,()=>{r=null}),Z())},i(i){t||(S(r),t=!0)},o(i){w(r),t=!1},d(i){i&&(m(e),m(n)),r&&r.d(i)}}}function cn(a,e,n){let t,r;te(a,$e,h=>n(6,t=h));let i=!1,s=!1;function l(h){if(!h&&!i){const g="Data has not been initialized. Going to the main page.",I=new Error(g);console.warn("[RandoPage:checkReadiness]",I.message),i=!0,he({message:g,type:"error"}),st("/",{replaceState:!0})}else n(0,s=!0)}const o=$e.subscribe(l);Ye(o),Ze(()=>{l(t)});const f=["properties",...at()],p=f[0],c=Le(p);te(a,c,h=>n(1,r=h));function u(h){c.set(h)}return[s,r,f,c,u]}class fn extends L{constructor(e){super(),q(this,e,cn,ln,P,{})}}function dn(a){let e,n;return e=new fn({}),{c(){A(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:j,i(t){n||(S(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}class bn extends L{constructor(e){super(),q(this,e,null,dn,P,{})}}export{bn as component};
