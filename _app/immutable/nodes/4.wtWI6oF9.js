import{s as P,A as re,l as L,m as M,i as k,O as R,d as m,f as b,g as $,h as I,j as v,K as D,U as oe,a as U,e as j,c as q,D as O,Y as F,n as le,W as ce,L as de,o as fe}from"../chunks/scheduler.rsKKbDYC.js";import{S as A,i as N,b as E,d as C,m as w,a as h,t as _,e as V,g as B,c as G}from"../chunks/index.DzfArh8w.js";import{w as ue}from"../chunks/index.0WC7A3s9.js";import{B as me,a as Y,b as ge,c as he,d as pe,g as _e}from"../chunks/navigation.RcH59dxc.js";import{h as H,a as Se}from"../chunks/hasDataStore.ZuuwiclO.js";import{l as J,m as Q}from"../chunks/index.AOCYmvTY.js";import{u as X,G as se,e as ve}from"../chunks/EditableList.B5CZojTd.js";function T(s,e=0,i="",t={}){const{id:n,type:a}=s,r=[i,n].filter(Boolean).join(".");if(!s.label&&!t.dontAddLabels&&(s.label=s.title||X(n)),!s.title&&!t.dontAddTitles&&(s.title=s.label||X(n)),s._fullId=r,s._level=e,a==="object"&&s.spec&&s.spec.forEach(c=>{T(c,e+1,r)}),a==="list"&&s.spec){const c=s.spec;s.layout="table",s.flatObjects=!0,s.editInPlace=!1,s.useActionsColumn=!0,s.activeRows=!0,T(c,e+1,r,{dontAddLabels:!0})}}const be={id:"properties",type:"object",spec:[{id:"name",type:"string"},{id:"licenses",type:"list",spec:{id:"licenses-item",type:"object",spec:[{id:"name",type:"string"},{id:"path",type:"string"},{id:"title",type:"string"}]}},{id:"version",type:"string"},{id:"description",type:"string"},{id:"homepage",type:"string"},{id:"created",type:"string"},{id:"contributors",type:"list",spec:{id:"contributors-item",type:"object",spec:[{id:"title",type:"string"},{id:"path",type:"string"},{id:"role",type:"string"}]}}]},ae={properties:"Properties","create-datasets":"Create datasets",delete:"Delete",disaggregate:"Disaggregate",mapping:"Mapping",replace:"Replace",update:"Update"},$e="_Section_blf11_11",K={Section:$e};function Ie(s){let e;return{c(){e=L(s[4])},l(i){e=M(i,s[4])},m(i,t){k(i,e,t)},p:R,d(i){i&&m(e)}}}function De(s){let e,i;return e=new me({props:{class:J(s[0],K.Section,s[1]&&K.active),id:s[2],title:s[4],variant:s[1]?"filled":"light",$$slots:{default:[Ie]},$$scope:{ctx:s}}}),e.$on("click",function(){re(s[3].bind(null,s[2]))&&s[3].bind(null,s[2]).apply(this,arguments)}),{c(){E(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){w(e,t,n),i=!0},p(t,[n]){s=t;const a={};n&3&&(a.class=J(s[0],K.Section,s[1]&&K.active)),n&4&&(a.id=s[2]),n&2&&(a.variant=s[1]?"filled":"light"),n&32&&(a.$$scope={dirty:n,ctx:s}),e.$set(a)},i(t){i||(h(e.$$.fragment,t),i=!0)},o(t){_(e.$$.fragment,t),i=!1},d(t){V(e,t)}}}function ke(s,e,i){let{className:t=""}=e,{isActive:n=!1}=e,{sectionId:a}=e,{onChangeSection:r}=e;const c=ae[a];return s.$$set=o=>{"className"in o&&i(0,t=o.className),"isActive"in o&&i(1,n=o.isActive),"sectionId"in o&&i(2,a=o.sectionId),"onChangeSection"in o&&i(3,r=o.onChangeSection)},[t,n,a,r,c]}class ye extends A{constructor(e){super(),N(this,e,ke,De,P,{className:0,isActive:1,sectionId:2,onChangeSection:3})}}function Z(s,e,i){const t=s.slice();return t[3]=e[i],t}function x(s){let e;return{c(){e=b("div"),this.h()},l(i){e=$(i,"DIV",{class:!0}),I(e).forEach(m),this.h()},h(){v(e,"class","delimiter section svelte-mxcnik")},m(i,t){k(i,e,t)},d(i){i&&m(e)}}}function ee(s){let e,i,t,n;e=new ye({props:{sectionId:s[3],isActive:s[3]===s[1],onChangeSection:s[2]}});let a=s[3]==="properties"&&x();return{c(){E(e.$$.fragment),i=U(),a&&a.c(),t=j()},l(r){C(e.$$.fragment,r),i=q(r),a&&a.l(r),t=j()},m(r,c){w(e,r,c),k(r,i,c),a&&a.m(r,c),k(r,t,c),n=!0},p(r,c){const o={};c&1&&(o.sectionId=r[3]),c&3&&(o.isActive=r[3]===r[1]),c&4&&(o.onChangeSection=r[2]),e.$set(o),r[3]==="properties"?a||(a=x(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null)},i(r){n||(h(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){r&&(m(i),m(t)),V(e,r),a&&a.d(r)}}}function Ee(s){let e,i,t,n,a=Q(s[0]),r=[];for(let o=0;o<a.length;o+=1)r[o]=ee(Z(s,a,o));const c=o=>_(r[o],1,1,()=>{r[o]=null});return{c(){e=b("div"),i=b("div"),t=b("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=$(o,"DIV",{class:!0});var l=I(e);i=$(l,"DIV",{class:!0});var d=I(i);t=$(d,"DIV",{class:!0});var p=I(t);for(let f=0;f<r.length;f+=1)r[f].l(p);p.forEach(m),d.forEach(m),l.forEach(m),this.h()},h(){v(t,"class","content svelte-mxcnik"),v(i,"class","container scrollable svelte-mxcnik"),v(e,"class","SectionsNavigator svelte-mxcnik")},m(o,l){k(o,e,l),D(e,i),D(i,t);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(t,null);n=!0},p(o,[l]){if(l&7){a=Q(o[0]);let d;for(d=0;d<a.length;d+=1){const p=Z(o,a,d);r[d]?(r[d].p(p,l),h(r[d],1)):(r[d]=ee(p),r[d].c(),h(r[d],1),r[d].m(t,null))}for(B(),d=a.length;d<r.length;d+=1)c(d);G()}},i(o){if(!n){for(let l=0;l<a.length;l+=1)h(r[l]);n=!0}},o(o){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)_(r[l]);n=!1},d(o){o&&m(e),oe(r,o)}}}function Ce(s,e,i){let{allSections:t}=e,{sectionId:n}=e,{onChangeSection:a}=e;return s.$$set=r=>{"allSections"in r&&i(0,t=r.allSections),"sectionId"in r&&i(1,n=r.sectionId),"onChangeSection"in r&&i(2,a=r.onChangeSection)},s.$$.update=()=>{s.$$.dirty&2&&console.log("[SectionsNavigator]",n)},[t,n,a]}class we extends A{constructor(e){super(),N(this,e,Ce,Ee,P,{allSections:0,sectionId:1,onChangeSection:2})}}function Ve(s){let e,i,t;return i=new se({props:{spec:s[1],data:s[0],onChange:s[2]}}),{c(){e=b("div"),E(i.$$.fragment),this.h()},l(n){e=$(n,"DIV",{class:!0});var a=I(e);C(i.$$.fragment,a),a.forEach(m),this.h()},h(){v(e,"class","EditProperties svelte-qhxnxq")},m(n,a){k(n,e,a),w(i,e,null),t=!0},p(n,[a]){const r={};a&1&&(r.data=n[0]),i.$set(r)},i(n){t||(h(i.$$.fragment,n),t=!0)},o(n){_(i.$$.fragment,n),t=!1},d(n){n&&m(e),V(i)}}}function Pe(s,e,i){let t;O(s,Y,r=>i(0,t=r));const n={...be};T(n);function a(r,c){console.log("[EditProperties:onChange]",c.id,{id:c.id,data:r,spec:c}),Y.set(r)}return s.$$.update=()=>{s.$$.dirty&1&&console.log("[EditProperties] DEBUG",{$randoPropertiesStore:t,propertiesSpec:n})},[t,n,a]}class Ae extends A{constructor(e){super(),N(this,e,Pe,Ve,P,{})}}function te(s){let e=s[0],i,t,n=ne(s);return{c(){n.c(),i=j()},l(a){n.l(a),i=j()},m(a,r){n.m(a,r),k(a,i,r),t=!0},p(a,r){r&1&&P(e,e=a[0])?(B(),_(n,1,1,R),G(),n=ne(a),n.c(),h(n,1),n.m(i.parentNode,i)):n.p(a,r)},i(a){t||(h(n),t=!0)},o(a){_(n),t=!1},d(a){a&&m(i),n.d(a)}}}function ne(s){let e,i;return e=new se({props:{spec:s[3],data:s[5],onChange:s[6]}}),{c(){E(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){w(e,t,n),i=!0},p(t,n){const a={};n&8&&(a.spec=t[3]),n&32&&(a.data=t[5]),e.$set(a)},i(t){i||(h(e.$$.fragment,t),i=!0)},o(t){_(e.$$.fragment,t),i=!1},d(t){V(e,t)}}}function Ne(s){let e,i,t=s[1]&&te(s);return{c(){e=b("div"),t&&t.c(),this.h()},l(n){e=$(n,"DIV",{class:!0,"data-set-id":!0});var a=I(e);t&&t.l(a),a.forEach(m),this.h()},h(){v(e,"class","EditDataSet svelte-ki2c8t"),v(e,"data-set-id",s[0])},m(n,a){k(n,e,a),t&&t.m(e,null),i=!0},p(n,[a]){n[1]?t?(t.p(n,a),a&2&&h(t,1)):(t=te(n),t.c(),h(t,1),t.m(e,null)):t&&(B(),_(t,1,1,()=>{t=null}),G()),(!i||a&1)&&v(e,"data-set-id",n[0])},i(n){i||(h(t),i=!0)},o(n){_(t),i=!1},d(n){n&&m(e),t&&t.d()}}}function Re(s,e,i){let t,n,a,r,c=R,o=()=>(c(),c=F(t,u=>i(1,r=u)),t),l,d=R,p=()=>(d(),d=F(n,u=>i(5,l=u)),n);s.$$.on_destroy.push(()=>c()),s.$$.on_destroy.push(()=>d());let{dataSetId:f}=e;function y(u){const S={...u};return ve(S),console.log("[EditDataSet:makeSpec]",{srcSpec:u,spec:S}),S}function g(u,S){console.log("[EditDataSet:onChange]",S.id,{id:S.id,data:u,spec:S}),n.set(u)}return s.$$set=u=>{"dataSetId"in u&&i(0,f=u.dataSetId)},s.$$.update=()=>{s.$$.dirty&1&&o(i(4,t=ge[f])),s.$$.dirty&1&&p(i(2,n=he[f])),s.$$.dirty&2&&i(3,a=y(r))},[f,r,n,a,t,l,g]}class je extends A{constructor(e){super(),N(this,e,Re,Ne,P,{dataSetId:0})}}function Be(s){let e,i;return e=new je({props:{dataSetId:s[0]}}),{c(){E(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){w(e,t,n),i=!0},p(t,n){const a={};n&1&&(a.dataSetId=t[0]),e.$set(a)},i(t){i||(h(e.$$.fragment,t),i=!0)},o(t){_(e.$$.fragment,t),i=!1},d(t){V(e,t)}}}function Ge(s){let e,i;return e=new Ae({}),{c(){E(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){w(e,t,n),i=!0},p:R,i(t){i||(h(e.$$.fragment,t),i=!0)},o(t){_(e.$$.fragment,t),i=!1},d(t){V(e,t)}}}function Ke(s){let e,i,t,n,a,r,c,o,l,d;const p=[Ge,Be],f=[];function y(g,u){return g[0]==="properties"?0:1}return o=y(s),l=f[o]=p[o](s),{c(){e=b("div"),i=b("div"),t=L("Edit: "),n=L(s[1]),a=U(),r=b("div"),c=b("div"),l.c(),this.h()},l(g){e=$(g,"DIV",{class:!0});var u=I(e);i=$(u,"DIV",{class:!0});var S=I(i);t=M(S,"Edit: "),n=M(S,s[1]),S.forEach(m),a=q(u),r=$(u,"DIV",{class:!0});var W=I(r);c=$(W,"DIV",{class:!0});var z=I(c);l.l(z),z.forEach(m),W.forEach(m),u.forEach(m),this.h()},h(){v(i,"class","header svelte-sg3yfv"),v(c,"class","content"),v(r,"class","container scrollable svelte-sg3yfv"),v(e,"class","DataEditorWrapper svelte-sg3yfv")},m(g,u){k(g,e,u),D(e,i),D(i,t),D(i,n),D(e,a),D(e,r),D(r,c),f[o].m(c,null),d=!0},p(g,[u]){(!d||u&2)&&le(n,g[1]);let S=o;o=y(g),o===S?f[o].p(g,u):(B(),_(f[S],1,1,()=>{f[S]=null}),G(),l=f[o],l?l.p(g,u):(l=f[o]=p[o](g),l.c()),h(l,1),l.m(c,null))},i(g){d||(h(l),d=!0)},o(g){_(l),d=!1},d(g){g&&m(e),f[o].d()}}}function Ue(s,e,i){let t,{sectionId:n}=e;return s.$$set=a=>{"sectionId"in a&&i(0,n=a.sectionId)},s.$$.update=()=>{s.$$.dirty&1&&i(1,t=ae[n])},[n,t]}class qe extends A{constructor(e){super(),N(this,e,Ue,Ke,P,{sectionId:0})}}function ie(s){let e,i,t,n,a,r,c,o;return n=new we({props:{allSections:s[2],sectionId:s[1],onChangeSection:s[4]}}),c=new qe({props:{sectionId:s[1]}}),{c(){e=b("div"),i=b("div"),t=b("div"),E(n.$$.fragment),a=U(),r=b("div"),E(c.$$.fragment),this.h()},l(l){e=$(l,"DIV",{class:!0});var d=I(e);i=$(d,"DIV",{class:!0});var p=I(i);t=$(p,"DIV",{class:!0});var f=I(t);C(n.$$.fragment,f),f.forEach(m),a=q(p),r=$(p,"DIV",{class:!0});var y=I(r);C(c.$$.fragment,y),y.forEach(m),p.forEach(m),d.forEach(m),this.h()},h(){v(t,"class","column sideColumn leftColumn svelte-1ff1l1r"),v(r,"class","column mainColumn svelte-1ff1l1r"),v(i,"class","layout svelte-1ff1l1r"),v(e,"class","EditorPage svelte-1ff1l1r")},m(l,d){k(l,e,d),D(e,i),D(i,t),w(n,t,null),D(i,a),D(i,r),w(c,r,null),o=!0},p(l,d){const p={};d&2&&(p.sectionId=l[1]),n.$set(p);const f={};d&2&&(f.sectionId=l[1]),c.$set(f)},i(l){o||(h(n.$$.fragment,l),h(c.$$.fragment,l),o=!0)},o(l){_(n.$$.fragment,l),_(c.$$.fragment,l),o=!1},d(l){l&&m(e),V(n),V(c)}}}function Le(s){let e,i,t,n=s[0]&&ie(s);return{c(){e=U(),n&&n.c(),i=j(),this.h()},l(a){ce("svelte-oi6135",document.head).forEach(m),e=q(a),n&&n.l(a),i=j(),this.h()},h(){document.title="Edit data"},m(a,r){k(a,e,r),n&&n.m(a,r),k(a,i,r),t=!0},p(a,[r]){a[0]?n?(n.p(a,r),r&1&&h(n,1)):(n=ie(a),n.c(),h(n,1),n.m(i.parentNode,i)):n&&(B(),_(n,1,1,()=>{n=null}),G())},i(a){t||(h(n),t=!0)},o(a){_(n),t=!1},d(a){a&&(m(e),m(i)),n&&n.d(a)}}}function Me(s,e,i){let t,n;O(s,H,g=>i(6,t=g));let a=!1,r=!1;function c(g){if(!g&&!a){const u="Data has not been initialized. Going to the main page.",S=new Error(u);console.warn("[EditorPage:checkReadiness]",S.message),a=!0,Se({message:u,type:"error"}),_e("/",{replaceState:!0})}else i(0,r=!0)}const o=H.subscribe(c);de(o),fe(()=>{c(t)});const d=["properties",...pe()],p=d[0],f=ue(p);O(s,f,g=>i(1,n=g));function y(g){f.set(g)}return[r,n,d,f,y]}class Oe extends A{constructor(e){super(),N(this,e,Me,Le,P,{})}}function Te(s){let e,i;return e=new Oe({}),{c(){E(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){w(e,t,n),i=!0},p:R,i(t){i||(h(e.$$.fragment,t),i=!0)},o(t){_(e.$$.fragment,t),i=!1},d(t){V(e,t)}}}class Xe extends A{constructor(e){super(),N(this,e,null,Te,P,{})}}export{Xe as component};
